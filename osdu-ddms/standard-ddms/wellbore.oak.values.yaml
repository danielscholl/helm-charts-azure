#  Copyright Â© Microsoft Corporation
#
#  Licensed under the Apache License, Version 2.0 (the "License");
#  you may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
#
#       http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.

# Default values for osdu-azure.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

################################################################################
# Azure Environment Settings
#
azure:
  tenant: <azure_tenant>
  subscription: <azure_subscription>
  resourcegroup: <azure_resourcegroup>
  identity: <azure_identity>
  identity_id: <azure_identity_id>
  keyvault: 
    name: <azure_keyvault>
    secrets:
    - key: appinsight.key
      obj: appinsights-key

################################################################################
# Common Containers Settings
#
containers:
  registry: <azure_acr>

################################################################################
# Common Ingress Settings
#
ingress:
  dns: <ingress_dns>

################################################################################
# Common Deployment Settings
#
deployment:
  podAnnotations:
    prometheus.io/path: /api/wellbore/metrics
    prometheus.io/port: "8080"
    prometheus.io/scrape: "true"

################################################################################
# DDMS Service Specific Configuration
#
configuration:
  - service: wellbore
    container:
      image: wellbore-ddms
      containerPort: 8080
    path: /api/wellbore
    probe:
      readiness: 
        path: /api/wellbore/healthz
      liveness: 
        path: /api/wellbore/healthz
    auth:
      disable:
        - "/api/wellbore/"
        - "/api/wellbore/ddms/v2/about"
        - "/api/wellbore/docs"
        - "/api/wellbore/openapi.json"
    config:
      CLOUD_PROVIDER: "az"
      SERVICE_NAME: "wellbore-ddms"
      OPENAPI_PREFIX: "/api/wellbore"
      KEYVAULT_URL: "https://<azure_keyvault>.vault.azure.net/"
      SERVICE_HOST_STORAGE: "http://storage.osdu-azure/api/storage"
      SERVICE_HOST_SEARCH: "http://search-service.osdu-azure/api/search"
      SERVICE_HOST_PARTITION: "http://partition.osdu-azure/api/partition"
      USE_PARTITION_SERVICE: "enabled"
      AZ_LOGGER_LEVEL: "INFO"
    secrets:
      - name: AZ_AI_INSTRUMENTATION_KEY
        key: appinsight.key